{% extends "RRIT/index.html" %}
{% load i18n admin_urls static admin_list %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="{% static "admin/css/changelists.css" %}">
<script src="{% url 'admin:jsi18n' %}"></script>
{% endblock %}

{% block extrahead %}
{{ block.super }}
{{ media.js }}
<script src="{% static 'admin/js/filters.js' %}" defer></script>
<script src="/static/admin/js/vendor/jquery/jquery.js"></script>
<script src="/static/admin/js/jquery.init.js"></script>
<script src="/static/admin/js/core.js"></script>
<script src="/static/admin/js/admin/RelatedObjectLookups.js"></script>
<script src="/static/admin/js/actions.js"></script>
<script src="/static/admin/js/urlify.js"></script>
<script src="/static/admin/js/prepopulate.js"></script>
<script src="/static/admin/js/vendor/xregexp/xregexp.js"></script>
<script src="/static/admin/js/filters.js" defer></script>
<link rel="stylesheet" href="{% static "leaflet.css" %} " />
<link rel="stylesheet" href="{% static "map.css" %} " />
<script src="{% static "leaflet.js" %}"></script>
<script src="{% static "map.js" %}"></script>

<script src="{% static "bootstrap/js/bootstrap.bundle.min.js" %}"></script>

<link rel="stylesheet" href="{% static "bootstrap/css/bootstrap.css" %} " />


{% endblock %}

{% block bodyclass %} app-{{ action_model }} model-{{ action_models_s }} change-list{% endblock %}
{% block sidebar %}
{% endblock %}
{% block nav-breadcrumbs %}
{% include "RRIT/navigation.html" %}

{% endblock %}


{% block nav-sidebar %}
{% include "RRIT/nav_sidebar.html" %}
{% endblock %}
{% block content %}
<div class="container1">
    <div class="row1">
        <div class="col-sm">
            <div style="text-align: center; font-size: 1rem; font-weight: 400; line-height: 1.5;">Происшествие</div>
            <div id="map" style="width:750px; height: 450px; position:relative; text-align:center; margin-top: 10px;"></div>
        </div>
        <div class="col-sm">
            <div style="text-align: center; font-size: 1rem; font-weight: 400; line-height: 1.5;">Характеристики происшествия</div>

                <div class="input-group mt-2">
                    <span class="input-group-text">Адрес</span>
                    <input type="" class="form-control" id="address" placeholder="Адрес" value=" {{incident.address}} "readonly>

                </div>

                <div class="input-group mt-2">
                    <span class="input-group-text">Координаты</span>
                    <input type="" class="form-control" id="lat" placeholder="Широта" value="{{ incident.latitude }} "readonly>
                    <input type="" class="form-control" id="lng" placeholder="Долгота" value="{{ incident.longitude }}"readonly>
                </div>
                <div class="form-group mt-2">
                    <span for="select" style="font-size: 1rem; font-weight: 400; line-height: 1.5;">Категория опасности происшествия</span>
                    <input type="" class="form-control mt-1" id="select" placeholder="Спецификация" value="{{ incident.specification }}"readonly>
                </div>
                <div class="form-group mt-2">
                    <label for="exampleFormControlTextarea1" style="font-size: 1rem; font-weight: 400; line-height: 1.5;">Описание происшествия</label>
                    <textarea class="form-control mt-1" id="exampleFormControlTextarea1" rows="4" style="resize:none; font-size: 1rem; font-weight: 400; line-height: 1.5;" placeholder="Описание инцидента" maxlength="250" readonly > {{ incident.description }}</textarea>
                </div>
            <div class="row1 mt-2">
                            <div class="col">
                              <a type="submit" class="btn btn-primary w-100" href="change/" style="color: white;">Изменить</a>
                            </div>
                            <div class="col">
                              <a type="submit" class="btn btn-danger w-100" href="delete/" style="color: white;">Удалить</a>
                            </div>
                          </div>
        </div>

    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
            //let value = JSON.stringify({{data}});
            //console.log(value);
            create_map([55.760748705787165, 37.626156387675145], 5);
         map.on('click', function(e) {

            console.log(e.latlng);
            var marker = L.marker(e.latlng).addTo(map).on('click', e => e.target.remove());
            });
    });

</script>
<div style="display: none" id="jsonData" data-json="{{ data }}"></div>

{% endblock %}
